---
- hosts: Class_master
  tasks:
    - when: region == aws_region
      block:
        - import_role:
            name: base

        - import_role:
            name: master

        - import_role:
            name: ssh_certs

        - import_role:
            name: rsyslog_forward

        - import_role:
            name: simta
          vars:
            simta_localmail: true
            simta_tls: false

        - import_role:
            name: comint

        - import_role:
            name: localnameserver

        - import_role:
            name: sensu

        - import_role:
            name: kitbag

        - import_role:
            name: vault

        - import_role:
            name: packer

        - import_role:
            name: nonpeople

        - import_role:
            name: people

        - import_role:
            name: duo

        - import_role:
            name: aws_saml_login

        - import_role:
            name: email_dnsbl-update

        - import_role:
            name: google_gam

        - import_role:
            name: google_gak

        - import_role:
            name: google_gyb

        - import_role:
            name: google_report_logins
          when: aws_region == 'us-west-2'

        - import_role:
            name: box_bam

        - import_role:
            name: box_examscan

        - import_role:
            name: redis_master

        - import_role:
            name: simta_master

        - import_role:
            name: plasticman

        - import_role:
            name: ansible_master

        - import_role:
            name: dashboard

        - import_role:
            name: grafana

        - import_role:
            name: clamav_master

        - import_role:
            name: s3repo_build
