- tags:
    - google
    - collab_admin_kit
    - gam
  block:
    - import_role:
        name: python_venv
      vars:
        venv_name: gam
        venv_packages:
          - google-auth
        venv_sudo_user: collaborate
        venv_wrappers:
          - name: gam
            target: python
            extra_args: /home/collaborate/GAM/src/gam.py
            wrapper_environment:
              - name: GAMUSERCONFIGDIR
                value: /home/collaborate/gam-config/{{ googled }}
          - name: gam-discussions
            target: python
            extra_args: /home/collaborate/GAM/src/gam.py
            wrapper_environment:
              - name: GAMUSERCONFIGDIR
                value: /home/collaborate/gam-config/{{ discussionsd }}

    - name: Install GAM
      become_user: collaborate
      git:
        repo: https://github.com/jay0lee/GAM.git
        dest: ~/GAM
        version: 7112a42
