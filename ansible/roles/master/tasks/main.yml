---

- name: Install extra packages
  yum:
    name:
      - gitolite3
      - opendkim
      - openldap-clients
      - python-ldap
      - unzip
    state: latest

- name: Install extra pip packages
  pip:
    name:
      - ftptool
      - hvac
    state: latest

- import_tasks: task_find_subnets.yml

- name: Create filesystem for /home
  filesystem:
    dev: /dev/xvdd
    fstype: xfs
    force: false

- name: Mount /home
  mount:
    name: /home
    src: /dev/xvdd
    fstype: xfs
    state: mounted

- name: Configure .bashrc
  copy:
    dest: /home/ec2-user/.bashrc
    src: bashrc
    owner: ec2-user
    group: ec2-user
    mode: 0644

