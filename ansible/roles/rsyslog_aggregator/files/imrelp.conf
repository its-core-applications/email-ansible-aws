module(
    load="imrelp"
)

input(
    type="imrelp"
    port="2514"
)

template(
    name="RemoteDynFile"
    type="string"
    string="/var/log/remote/%HOSTNAME%/%syslogfacility-text%"
)

template(
    name="RemoteFileFormat"
    type="string"
    string="%TIMESTAMP:::date-rfc3339% %HOSTNAME% %syslogtag%%msg:::sp-if-no-1st-sp%%msg:::drop-last-lf%\n"
)

if $inputname == "imrelp" then
    action(
        type="omfile"
        dynaFile="RemoteDynFile"
        template="RemoteFileFormat"
    )
& stop

