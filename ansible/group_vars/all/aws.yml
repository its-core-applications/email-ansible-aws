---

tld: "{{ lookup( 'env', 'TLD' ) }}"
subd: "{{ [( aws_status == 'prod' ) | ternary('a', 'x'), 'mail', tld ] | join('.') }}"

aws_region: "{{ lookup('env', 'AWS_DEFAULT_REGION') }}"
aws_region_group: "{{ groups['region_' ~ aws_region | replace('-', '_')] | default([]) }}"
aws_status: "{{ lookup('env', 'AWS_STATUS') }}"
aws_resource_prefix: umcollab
aws_resource_owner: its iso cs cs
aws_primary_regions:
  prod: us-west-2
  nonprod: us-east-2
aws_primary_region: "{{ aws_primary_regions[aws_status] }}"
aws_region_vdc_core: us-east-2

aws_profiles:
  prod:
    s3: umcollab
    sns: umcollab
    spfd: umcollab
    subd: umcollab
    us-east-2: vdc-prod
    us-west-2: umcollab
    vdc-core: vdc-core
  nonprod:
    s3: vdc-nonprod
    sns: vdc-nonprod
    spfd: vdc-nonprod
    subd: vdc-nonprod
    us-east-2: vdc-nonprod
    vdc-core: vdc-core-nonprod

aws_profile: "{{ aws_profiles[aws_status][aws_region] }}"
aws_profile_ec2: "{{ aws_profiles[aws_status][region] }}"
aws_profile_s3: "{{ aws_profiles[aws_status].s3 }}"
aws_profile_subd: "{{ aws_profiles[aws_status].subd }}"
aws_profile_spfd: "{{ aws_profiles[aws_status].spfd }}"
aws_profile_sns: "{{ aws_profiles[aws_status].sns }}"

vdc_core: false

sns_region: us-west-2
yum_aws_region: us-west-2

aws_instance_types:
  prod:
    default: m5.large
    ctools-mx: t2.small
    egress: m5.2xlarge
    mx: m5.xlarge
    mx-test: t2.small
    smtp-test: t2.small
    vdc-relay: t2.small
  nonprod:
    default: t3.small
    master: m5.large
    builder: m5.large

aws_instance_counts:
  prod:
    dnsbl: 4
    egress: 3
    mx: 6
    relay-egress: 3
    vdc-relay: 2
  nonprod:
    egress: 2
    mx: 3

yum_hostname: yum.{{ subd }}
yum_repo_path: "{{ ansible_facts.distribution | lower }}/{{ ansible_facts.distribution_major_version }}"

master_hostname: "{{ master_hostnames[aws_status][aws_region] }}.{{ subd }}"

master_hostnames:
  nonprod:
    us-east-2: pandora
  prod:
    us-west-2: mogo
    us-east-2: ego

rbldnsd_master:
  - 141.211.21.71
  - 141.211.7.108

ops_email: blackops@{{ tld }}
ops_rootmail: blackops.{{ (aws_status == 'prod') | ternary('root', 'nonprod') }}@{{ tld }}

