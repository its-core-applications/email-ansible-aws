---

sensu_sns:
  - name: oncall
    display_name: ONC
    subscriptions:
      nonprod:
        - endpoint: "{{ ops_rootmail }}"
          protocol: email
      prod:
        - endpoint: "{{ lookup('hashi_vault', 'secret=secret/phone/pager:value') }}"
          protocol: sms

  - name: rootmail
    display_name: rootmail
    subscriptions:
      nonprod:
        - endpoint: "{{ ops_rootmail }}"
          protocol: email
        - endpoint: arn:aws:lambda:{{ sns_region }}:{{ aws_account_sns }}:function:sns2slack
          protocol: lambda
      prod:
        - endpoint: "{{ ops_rootmail }}"
          protocol: email
        - endpoint: arn:aws:lambda:{{ sns_region }}:{{ aws_account_sns }}:function:sns2slack
          protocol: lambda

sensu_proxy_clients:
  - name: "{{ aws_region }}.aws.amazon.com"
    subscriptions:
      - Status_production
  - name: egress.{{ aws_region }}.{{ subd }}
    subscriptions:
      - Status_production
  - name: "{{ simta_redis_host }}"
    subscriptions:
      - Class_redis_cluster
      - Status_production
  - name: box.com
    subscriptions:
      - Status_production
  - name: google.com
    subscriptions:
      - Status_production

sensu_environment:
  PATH: /opt/sensu/embedded/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin:/usr/local/sbin
  GEM_PATH: /opt/sensu/embedded/lib/ruby/gems/2.4.0

sensu_plugins:
  - sensu-plugin
  - sensu-plugins-cpu-checks
  - sensu-plugins-disk-checks
  - sensu-plugins-load-checks
  - sensu-plugins-memory-checks
  - sensu-plugins-network-checks
  - sensu-plugins-process-checks
  - sensu-plugins-redis
  - sensu-plugins-sensu
  - sensu-plugins-ssl
