- hosts: localhost
  gather_facts: false
  become: false
  tasks:
    - name: Fetch zone list
      route53_info:
        profile: "{{ aws_profile_subd }}"
        query: hosted_zone
      register: r53_zones

    - include_role:
        name: route53_dns_cleanup
      vars:
        subd_zone: "{{ r53_zones.HostedZones | selectattr('Name', 'equalto', subd ~ '.') | first }}"
      loop: "{{ range(0, ((subd_zone.ResourceRecordSetCount / 25) | int)) | list }}"
      loop_control:
        loop_var: include_iteration
