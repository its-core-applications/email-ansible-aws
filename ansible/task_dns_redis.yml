---

- name: "Set {{ simta_redis_host }}"
  delegate_to: localhost
  become: false
  run_once: true
  route53:
    command: "create"
    overwrite: true
    zone: "{{ subd }}"
    record: "{{ simta_redis_host }}"
    type: "A"
    ttl: 60
    value: "{{ groups.redis | default({}) | map('extract', hostvars, 'private_ip_address') | join(', ') }}"
  when: groups.redis is defined

